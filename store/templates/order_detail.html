{% extends 'base.html' %}
{% block content %}

<h2 class="mb-3">ğŸ“¦ Order #{{ order.id }}</h2>

<!-- ORDER SUMMARY -->
<div class="card p-4 mb-4">
    <p><strong>Status:</strong> {{ order.status }}</p>
    <p><strong>Payment:</strong> {{ order.payment_method }}</p>
    <p><strong>Total:</strong> â‚¹{{ order.total_amount }}</p>

    <p>
        <strong>Estimated Delivery:</strong>
        {{ order.estimated_delivery }}
    </p>

    {% if order.delivered_on %}
        <p>
            <strong>Delivered On:</strong>
            {{ order.delivered_on }}
        </p>
    {% endif %}
</div>

<!-- ORDER TRACKING PROGRESS BAR -->
<div class="card p-4 mb-4">
    <h5>ğŸ“ Order Tracking</h5>

    <div style="background:#ddd; height:8px; border-radius:5px; margin:15px 0;">
        <div style="
            height:8px;
            border-radius:5px;
            background:#28a745;
            width:
            {% if order.status == 'Pending' %}25%
            {% elif order.status == 'Processing' %}50%
            {% elif order.status == 'Out for Delivery' %}75%
            {% elif order.status == 'Delivered' %}100%
            {% else %}0%
            {% endif %}
        ">
        </div>
    </div>

    <small>
        {% if order.status == 'Pending' %}
            ğŸ•’ Order received
        {% elif order.status == 'Processing' %}
            âš™ï¸ Order is being prepared
        {% elif order.status == 'Out for Delivery' %}
            ğŸšš Out for delivery
        {% elif order.status == 'Delivered' %}
            âœ… Delivered successfully
        {% elif order.status == 'Cancelled' %}
            âŒ Order cancelled
        {% endif %}
    </small>
</div>

<!-- ORDER ITEMS -->
<table class="table table-bordered">
    <thead class="table-success">
        <tr>
            <th>Product</th>
            <th>Qty</th>
            <th>Price</th>
            <th>Subtotal</th>
        </tr>
    </thead>
    <tbody>
        {% for item in order.items.all %}
        <tr>
            <td>{{ item.product.name }}</td>
            <td>{{ item.quantity }}</td>
            <td>â‚¹{{ item.price }}</td>
            <td>â‚¹{{ item.price|floatformat:2 }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<a href="{% url 'my_orders' %}" class="btn btn-secondary">
    â† Back to Orders
</a>

{% endblock %}
